<!DOCTYPE html>
<meta charset="utf-8">
<title>HTML5・ドラッグ＆ドロップのサンプル２</title>
<style>
div {
  border : solid 1px black;
  padding : 10px;
  background-color : yellow;
}
</style>


<h3>HTML5のドラッグドロップのサンプル２</h3>


<div
  ondragover="f1(event);"
  ondrop="f2(event)">
  ここにファイルをドロップしてね
</div>


<script>

// ドロップ受け付け判定
function f1( event )
{
  // ドロップを受け付ける
  event.preventDefault();
}


// ドロップ処理
function f2(event)
{
  // ページの遷移を防止
  //（これがないとドラッグ内容の文字列へブラウザが遷移する）
  event.preventDefault();

  // イベントに格納されたファイルを取り出し
  var f = event.dataTransfer.files[0];
  
  // ファイル情報を表示
  alert(
    "ファイル名：" + f.name 
    + "\nファイルの型：" + f.type 
    + "\nファイルサイズ：" + f.size / 1000 + " KB "
    + "\n最終更新日時：" + f.lastModifiedDate
  );
  
  // ファイル内容の読み取り
  var reader = new FileReader(); // ファイルを読み取るオブジェクト
  reader.onloadend = function(){
    alert("ファイルの内容：" + reader.result);
  };
  reader.readAsDataURL( f );
}

</script>

